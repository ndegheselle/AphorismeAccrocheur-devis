import{t as Ue,a as Ve}from"./O273lVJd.js";import{p as We,b as Xe,c as e,s,t as Ye,g as i,a as Ze,e as K,r as t}from"./5qLNcEMJ.js";import{d as et,s as tt,a as at,b as d}from"./4hdA9Hqv.js";import{r as c}from"./CSdkdAZB.js";import{s as m}from"./BcuBeYSt.js";import{b as v}from"./DNmfbV_I.js";import{p as u}from"./DEnCKr3U.js";import{b as st}from"./BV0wr5sm.js";import{C as rt,r as de}from"./h9FtDlR7.js";import"./CjwIIwk2.js";import"./DmrV5KAy.js";import{a as lt,c as it}from"./y7u0JUKb.js";import{t as ot}from"./BkYxRAWn.js";let r=u({lastName:"",adress:"",city:"",zipCode:"",email:"",phone:""});function dt(o){return Object.keys(r).forEach(n=>{r[n]=""}),(!o.lastName||o.lastName.trim()==="")&&(r.lastName="Le nom est obligatoire"),(!o.adress||o.adress.trim()==="")&&(r.adress="L'adresse est obligatoire"),(!o.city||o.city.trim()==="")&&(r.city="La ville est obligatoire"),!o.zipCode||o.zipCode.trim()===""?r.zipCode="Le code postal est obligatoire":/^\d{5}$/.test(o.zipCode)||(r.zipCode="Le code postal doit contenir 5 chiffres"),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(r.email="L'adresse email n'est pas valide"),o.phone&&(/^(?:(?:\+|00)33|0)\s*[1-9](?:[\s.-]*\d{2}){4}$/.test(o.phone)||(r.phone="Le numéro de téléphone n'est pas valide")),Object.values(r).some(n=>n!=="")}var pt=(o,n)=>n(),nt=(o,n)=>n(),ct=(o,n)=>n(),vt=Ue('<dialog class="modal"><fieldset class="fieldset w-md modal-box bg-base-200 border border-base-300 p-4 rounded-box"><legend class="fieldset-legend"> </legend> <div class="grid grid-cols-3 gap-2"><div><label class="fieldset-label" for="firstName"> </label> <input type="text" class="input" required name="firstName"></div> <div class="col-span-2"><label class="fieldset-label" for="lastName"> </label> <input type="text" name="lastName"> <p class="fieldset-label text-error"> </p></div></div> <div><label class="fieldset-label" for="adress"> </label> <input type="text" name="adress"> <p class="fieldset-label text-error"> </p></div> <div class="grid grid-cols-3 gap-2"><div class="col-span-2"><label class="fieldset-label" for="city"> </label> <input type="text" name="city"> <p class="fieldset-label text-error"> </p></div> <div class="col-span-1"><label class="fieldset-label" for="zipCode"> </label> <input type="text" name="zipCode"> <p class="fieldset-label text-error"> </p></div></div> <div><label class="fieldset-label" for="email"> </label> <input type="email" name="email"> <p class="fieldset-label text-error"> </p></div> <div><label class="fieldset-label" for="phone"> </label> <input type="tel" name="phone"> <p class="fieldset-label text-error"> </p></div> <p class="fieldset-label"> </p> <div class="modal-action"><button class="btn"> </button> <button class="btn btn-primary"> </button></div></fieldset> <div class="modal-backdrop"><button>Close</button></div></dialog>');function wt(o,n){We(n,!0);const[pe,ne]=tt(),p=()=>at(ot,"$t",pe);let a=Xe(u(new rt)),z,_;async function ce(){if(!dt(i(a)))try{i(a).exists?K(a,u(await de.update(i(a)))):K(a,u(await de.create(i(a)))),f(!0)}catch{lt.error(p()("clients.edit.error"))}}function ve(l){return K(a,u(l)),z=it(),_.show(),z.promise}function f(l=!1){_.close(),z.resolve(l?i(a):null)}var b=vt(),w=e(b),k=e(w),me=e(k,!0);t(k);var L=s(k,2),E=e(L),j=e(E),ue=e(j,!0);t(j);var Q=s(j,2);c(Q),t(E);var S=s(E,2),q=e(S),_e=e(q);t(q);var x=s(q,2);c(x);let T;var U=s(x,2),fe=e(U,!0);t(U),t(S),t(L);var O=s(L,2),P=e(O),be=e(P);t(P);var g=s(P,2);c(g);let V;var W=s(g,2),xe=e(W,!0);t(W),t(O);var R=s(O,2),D=e(R),M=e(D),ge=e(M);t(M);var h=s(M,2);c(h);let X;var Y=s(h,2),he=e(Y,!0);t(Y),t(D);var Z=s(D,2),A=e(Z),ye=e(A);t(A);var y=s(A,2);c(y);let ee;var te=s(y,2),Ce=e(te,!0);t(te),t(Z),t(R);var B=s(R,2),F=e(B),Ne=e(F,!0);t(F);var C=s(F,2);c(C);let ae;var se=s(C,2),$e=e(se,!0);t(se),t(B);var G=s(B,2),H=e(G),ze=e(H,!0);t(H);var N=s(H,2);c(N);let re;var le=s(N,2),we=e(le,!0);t(le),t(G);var I=s(G,2),ke=e(I,!0);t(I);var ie=s(I,2),$=e(ie);$.__click=[pt,f];var Le=e($,!0);t($);var J=s($,2);J.__click=[nt,ce];var Ee=e(J,!0);t(J),t(ie),t(w);var oe=s(w,2),je=e(oe);je.__click=[ct,f],t(oe),t(b),st(b,l=>_=l,()=>_),Ye((l,Oe,Pe,Re,De,Me,Ae,Be,Fe,Ge,He,Ie,Je,Ke,Qe,Se,Te)=>{d(me,l),d(ue,Oe),d(_e,`${Pe??""} *`),T=m(x,1,"input",null,T,Re),d(fe,r.lastName),d(be,`${De??""} *`),V=m(g,1,"input w-full",null,V,Me),d(xe,r.adress),d(ge,`${Ae??""} *`),X=m(h,1,"input",null,X,Be),d(he,r.city),d(ye,`${Fe??""} *`),ee=m(y,1,"input",null,ee,Ge),d(Ce,r.zipCode),d(Ne,He),ae=m(C,1,"input w-full",null,ae,Ie),d($e,r.email),d(ze,Je),re=m(N,1,"input w-full",null,re,Ke),d(we,r.phone),d(ke,Qe),d(Le,Se),d(Ee,Te)},[()=>i(a).exists?p()("clients.edit"):p()("clients.new"),()=>p()("clients.firstName"),()=>p()("clients.lastName"),()=>({"input-error":r.lastName}),()=>p()("clients.adress"),()=>({"input-error":r.adress}),()=>p()("clients.city"),()=>({"input-error":r.city}),()=>p()("clients.zipCode"),()=>({"input-error":r.zipCode}),()=>p()("clients.email"),()=>({"input-error":r.email}),()=>p()("clients.phone"),()=>({"input-error":r.phone}),()=>p()("common.fields.required"),()=>p()("common.cancel"),()=>i(a).exists?p()("common.update"):p()("common.create")]),v(Q,()=>i(a).firstName,l=>i(a).firstName=l),v(x,()=>i(a).lastName,l=>i(a).lastName=l),v(g,()=>i(a).adress,l=>i(a).adress=l),v(h,()=>i(a).city,l=>i(a).city=l),v(y,()=>i(a).zipCode,l=>i(a).zipCode=l),v(C,()=>i(a).email,l=>i(a).email=l),v(N,()=>i(a).phone,l=>i(a).phone=l),Ve(o,b);var qe=Ze({show:ve,close:f});return ne(),qe}et(["click"]);export{wt as E};
