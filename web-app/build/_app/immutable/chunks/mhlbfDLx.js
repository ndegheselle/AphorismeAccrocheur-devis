var M=Object.defineProperty;var N=(s,e,o)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var t=(s,e,o)=>N(s,typeof e!="symbol"?e+"":e,o);import{e as Q,f as z,p as T,b as n,I as A,s as V,P as d,R as c,d as I,a as D,c as k}from"./CjwIIwk2.js";import{c as C}from"./Dy5JpXxM.js";import{c as W,a as m,t as g}from"./O273lVJd.js";import{p as X,f as Y,a as Z,c as a,r as i,s as f,t as U}from"./5qLNcEMJ.js";import{b}from"./4hdA9Hqv.js";import{i as x}from"./HbRG54zj.js";import{s as y}from"./CSdkdAZB.js";class E{constructor(){t(this,"$id");t(this,"name");t(this,"adress");t(this,"city");t(this,"zipCode");t(this,"email");t(this,"phone");t(this,"logoId")}get fullAddress(){return`${this.adress}, ${this.city}, ${this.zipCode}`}get exists(){return this.$id!=null}get logoUrl(){return this.logoId==null?"":`${Q}/storage/buckets/${z}/files/${this.logoId}/view?project=${T}`}}async function $(){let s=await I.listDocuments(D,k.business);return s.documents.length==0?null:C(E,s.documents[0])}async function ee(s){if(n.currentUser==null)throw new Error("User is not connected.");let e=await I.createDocument(D,k.business,A.unique(),s,[d.read(c.user(n.currentUser.$id)),d.update(c.user(n.currentUser.$id)),d.delete(c.user(n.currentUser.$id))]);return C(E,e)}async function se(s){if(s.$id==null)throw new Error("Client ID is null.");let e=await I.updateDocument(D,k.clients,s.$id,s);return C(E,e)}async function re(s){if(n.currentUser==null)throw new Error("User is not connected.");const e=A.unique();return await V.createFile(z,e,s,[d.read(c.user(n.currentUser.$id)),d.update(c.user(n.currentUser.$id)),d.delete(c.user(n.currentUser.$id))]),e}const be={getFirstOrDefault:$,create:ee,update:se,uploadLogo:re};var te=g("<a> </a>"),ae=g("<a> </a>"),ie=g('<div class="flex gap-2"><div class="avatar"><div class="w-24 rounded"><img alt="Logo"></div></div> <div class="grow"><b> </b> <p> </p> <!> <!></div></div>'),ne=g(`<div class="flex h-16"><span class="text-sm m-auto opacity-60"><i class="fa-regular fa-building me-2"></i> L'entreprise n'est pas configur√©</span></div>`);function ge(s,e){X(e,!0);var o=W(),B=Y(o);{var P=l=>{var v=ie(),p=a(v),F=a(p),S=a(F);i(F),i(p);var L=f(p,2),h=a(L),O=a(h,!0);i(h);var _=f(h,2),G=a(_,!0);i(_);var j=f(_,2);{var H=u=>{var r=te(),w=a(r,!0);i(r),U(()=>{y(r,"href",`mailto:${e.business.email??""}`),b(w,e.business.email)}),m(u,r)};x(j,u=>{e.business.email&&u(H)})}var J=f(j,2);{var K=u=>{var r=ae(),w=a(r,!0);i(r),U(()=>{var q;y(r,"href",`tel:${((q=e.business)==null?void 0:q.phone)??""}`),b(w,e.business.phone)}),m(u,r)};x(J,u=>{e.business.phone&&u(K)})}i(L),i(v),U(()=>{y(S,"src",e.business.logoUrl),b(O,e.business.name),b(G,e.business.fullAddress)}),m(l,v)},R=l=>{var v=ne();m(l,v)};x(B,l=>{e.business?l(P):l(R,!1)})}m(s,o),Z()}export{E as B,ge as S,be as r};
