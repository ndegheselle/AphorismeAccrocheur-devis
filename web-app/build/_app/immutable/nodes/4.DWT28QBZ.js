import{t as m,a as c}from"../chunks/O273lVJd.js";import{i as oa}from"../chunks/Dn0ETJOQ.js";import{p as la,f as da,m as S,c as s,t as H,a as na,s as e,d as J,g as t,e as p,r as a}from"../chunks/5qLNcEMJ.js";import{d as va,s as ca,a as ma,b as A}from"../chunks/4hdA9Hqv.js";import{i as K}from"../chunks/HbRG54zj.js";import{e as fa,i as pa}from"../chunks/RcQs6_xB.js";import{s as L}from"../chunks/CSdkdAZB.js";import{b as ua}from"../chunks/BV0wr5sm.js";import{g as _a}from"../chunks/DR6iQD-A.js";import{S as ba,p as ga}from"../chunks/BBKQ_Obe.js";import{r as N,f as ha}from"../chunks/CxFndPYr.js";import{r as O}from"../chunks/Uwt0dLAH.js";import{a as ya}from"../chunks/y7u0JUKb.js";import{c as xa}from"../chunks/fiapuJst.js";import{t as wa}from"../chunks/BkYxRAWn.js";import{o as $a}from"../chunks/z1zQKN8N.js";import{E as ka}from"../chunks/DhCyuzQq.js";function Ba(u,o){xa.show("Supprimer le client","Êtes-vous sûr de vouloir supprimer ce client ?","fa-trash").then(async n=>{var l;n&&((l=t(o))==null?void 0:l.$id)!=null&&(await O.remove(t(o).$id),_a("/clients"),ya.success("Client supprimé avec succès !"))})}async function Ca(u,o,n){if(t(o)==null)return;let l=await t(n).show(t(o));l&&p(o,l)}var Ma=m('<div class="flex h-20"><span class="text-sm m-auto opacity-60">Aucun devis trouvé</span></div>'),Sa=m('<div class="ms-auto my-auto badge badge-primary badge-sm">Facturé</div>'),Aa=m('<li class="p-2"><a class="flex w-full"><span class="font-semibold"> </span> <span class="ms-4 my-auto text-xs"> </span> <!></a></li>'),Da=m('<ul class="list bg-base-100 rounded-box shadow-md"></ul>'),Ea=m('<div class="container mx-auto py-4"><div class="grid gap-2"><div class="card bg-base-300 shadow-md"><div class="card-body"><div class="flex"><h2 class="card-title"><i class="fa-solid fa-user"></i> Client</h2> <details class="ms-auto dropdown dropdown-end"><summary class="btn btn-ghost"><i class="fa-solid fa-ellipsis"></i></summary> <ul class="menu dropdown-content bg-base-100 rounded-box shadow-md"><li><button><i class="fa-solid fa-pen"></i> Modifier</button></li> <li><button class="text-error"><i class="fa-solid fa-trash"></i> Supprimer</button></li></ul></details></div> <!></div></div> <div class="card bg-base-200 shadow-md"><div class="card-body"><div class="flex"><h2 class="card-title"><i class="fa-solid fa-file-invoice"></i> </h2> <a class="ms-auto btn btn-circle" aria-label="Add estimate"><i class="fa-solid fa-plus"></i></a></div> <!></div></div></div></div> <!>',1);function Va(u,o){la(o,!1);const[n,l]=ca(),P=()=>ma(wa,"$t",n);let _=S(),d=S(),b=S([]);$a(async()=>{var i,r;p(d,await O.getById(ga.params.id)),p(b,await N.getByClient((i=t(d))==null?void 0:i.$id)),await N.getByClient((r=t(d))==null?void 0:r.$id,!0)}),oa();var D=Ea(),g=da(D),E=s(g),h=s(E),I=s(h),y=s(I),q=e(s(y),2),F=e(s(q),2),x=s(F),Q=s(x);Q.__click=[Ca,d,_],a(x);var j=e(x,2),R=s(j);R.__click=[Ba,d],a(j),a(F),a(q),a(y);var T=e(y,2);ba(T,{get client(){return t(d)}}),a(I),a(h);var z=e(h,2),G=s(z),w=s(G),$=s(w),U=e(s($));a($);var V=e($,2);a(w);var W=e(w,2);{var X=i=>{var r=Ma();c(i,r)},Y=i=>{var r=Da();fa(r,5,()=>t(b),pa,(aa,f)=>{var k=Aa(),B=s(k),C=s(B),sa=s(C,!0);a(C);var M=e(C,2),ta=s(M,!0);a(M);var ia=e(M,2);{var ra=v=>{var ea=Sa();c(v,ea)};K(ia,v=>{t(f).isBilled&&v(ra)})}a(B),a(k),H(v=>{L(B,"href",`/estimates/${t(f).$id??""}`),A(sa,t(f).reference),A(ta,v)},[()=>ha(t(f).issueDate)],J),c(aa,k)}),a(r),c(i,r)};K(W,i=>{t(b).length===0?i(X):i(Y,!1)})}a(G),a(z),a(E),a(g);var Z=e(g,2);ua(ka(Z,{$$legacy:!0}),i=>p(_,i),()=>t(_)),H(i=>{var r;A(U,` ${i??""}`),L(V,"href",`/estimates/new?clientId=${((r=t(d))==null?void 0:r.$id)??""}`)},[()=>P()("navigation.estimates")],J),c(u,D),na(),l()}va(["click"]);export{Va as component};
